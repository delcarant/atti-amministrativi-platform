# Valori di configurazione per il deployment Kubernetes

# Process Engine
processEngine:
  image:
    repository: ghcr.io/delcarant/atti-amministrativi-process-engine
    tag: "1.0.0"
    pullPolicy: IfNotPresent
  replicaCount: 2
  service:
    type: ClusterIP
    port: 8080
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"
  env:
    DB_USER: kogito
    DB_PASSWORD: kogito
    OIDC_CLIENT_SECRET: secret

# Governance
governance:
  image:
    repository: ghcr.io/delcarant/atti-amministrativi-governance
    tag: "1.0.0"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 8082
  resources:
    requests:
      memory: "256Mi"
      cpu: "125m"
    limits:
      memory: "512Mi"
      cpu: "250m"

# PostgreSQL
postgres:
  image:
    repository: postgres
    tag: "16"
  service:
    type: ClusterIP
    port: 5432
  env:
    POSTGRES_DB: atti_amministrativi
    POSTGRES_USER: kogito
    POSTGRES_PASSWORD: kogito
  storage:
    size: 10Gi
    storageClass: standard

# Keycloak
keycloak:
  image:
    repository: quay.io/keycloak/keycloak
    tag: "25.0"
  service:
    type: ClusterIP
    port: 8080
  admin:
    username: admin
    password: admin

# Frontend
frontend:
  image:
    repository: ghcr.io/delcarant/atti-amministrativi-frontend
    tag: "1.0.0"
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 80

# Ingress
ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
  hosts:
    - host: atti.comune.it
      paths:
        - path: /
          pathType: Prefix
          service: frontend
        - path: /api
          pathType: Prefix
          service: process-engine
